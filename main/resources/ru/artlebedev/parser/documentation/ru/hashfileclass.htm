<html>
<head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=windows-1251">
    <meta name="keywords" content="hashfile,hashfile, Класс">
    <title>Hashfile (класс)</title>

    <script language="JavaScript"><!--
    if(top.frames.length==0) {
        top.location.href='./?hashfileclass.htm'
    } else {
        if(document.referrer!='' && 0>document.referrer.indexOf(top.frames[0].location.pathname)) {
            top.frames[0].location.hash='hashfileclass.htm'
        }
    }
    //--></script>

</head>

<body bgcolor="#FFFFFF" text="black">


<table border="0" cellspacing="0" cellpadding="2">
  <tr>
    <td>
      
<span style="font-family:FreeSetC,Arial; font-size:12pt; color:#000000"><b>Hashfile (класс) </b><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><b><i>[3.1.2]</i></b></span><span style="font-family:FreeSetC,Arial; font-size:12pt; color:#000000"><b>
<br>
</b></span></span>
    </td>
  </tr>
  <tr><td bgcolor="#99D228" height="3"></td></tr>
</table>
<br>



<span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">Класс предназначен для работы с хешами, хранящимися на диске. В отличие от класса <span style="font-family:Monospace; font-size:10pt; color:#000000"><b><a href=hashclass.htm>hash</a></b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> объекты данного класса считаются всегда определенным (</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>def</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">) и не имеют числового значения.
<br>

<br>
Если класс </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>hash</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> хранит свои данные в оперативной памяти, </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>hashfile</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> хранит их на диске, причем можно отдельно задавать время хранения каждой пары ключ-значение.
<br>
<i>Замечание: для хранения одного </i></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>hashfile</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><i> используются два файла: .dir и .pag.
<br>
Замечание: существует ограничение на длину строк ключа и значения, в сумме они не должны превышать 8000 байт.
<br>
</i>
<br>
<a href=hashfileread.htm>Чтение</a> и <a href=hashfilewrite.htm>запись</a> данных происходит очень быстро - идет работа только с необходимыми фрагментами файлов данных.
<br>
На простых задачах </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>hashfile</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> работает значительно быстрее баз данных.
<br>
<i>Замечание: в один момент времени файл может изменяться только одним скриптом, остальные ждут окончания его работы.</i><i>
<br>
</i>
<br>
</span><span style="font-family:FreeSetC,Arial; font-size:12pt; color:#000000"><b>Пример</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">
<br>
Допустим, желательно некоторую информацию получить от посетителя на одной странице сайта, и иметь возможность отобразить ее - на другой странице сайта. Причем необходимо, чтобы посетитель не мог ее ни увидеть ни подделать.
<br>

<br>
Можно поместить информацию в </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>hashfile</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">, ассоциировав ее со случайной строкой - идентификатором «сеанса общения с посетителем». Идентификатор сеанса общения можно поместить в </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b><a href=cookieclass.htm>cookie</a></b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">, данные теперь хранятся на сервере, не видны посетителю и не могут быть им подделаны.
<br>

<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>#&nbsp;создаем/открываем&nbsp;файл&nbsp;с&nbsp;информацией
<br>
$sessions[^hashfile::</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=hashfileopen.htm>open</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>[</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>/sessions</b><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>]]
<br>
^if(!def&nbsp;</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=cookiestats.htm>$cookie:sid</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>){
<br>
&nbsp;&nbsp;&nbsp;&nbsp;</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=cookierec.htm>$cookie:sid</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>[^</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=mathclass.htm>math</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>:</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=mathuuid.htm>uuid</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>[]]
<br>
}
<br>
#&nbsp;после&nbsp;этого…
<br>

<br>
$information_string[</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>произвольное&nbsp;значение</b><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>]
<br>
#&nbsp;…так&nbsp;запоминаем&nbsp;произвольную&nbsp;$information_string&nbsp;под&nbsp;ключом&nbsp;sid&nbsp;на&nbsp;2&nbsp;дня
<br>
$sid[$cookie:sid]
<br>
$sessions.$sid[</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=hashfilewrite.htm>$.value[$information_string] $.expires(2)</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>]
<br>

<br>
#&nbsp;…а&nbsp;так&nbsp;можем&nbsp;считать&nbsp;сохраненное&nbsp;ранее&nbsp;значение
<br>
#&nbsp;если&nbsp;с&nbsp;момента&nbsp;сохранения&nbsp;прошло&nbsp;меньше&nbsp;2х&nbsp;дней
<br>
$sid[$cookie:sid]
<br>
$information_string[</b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b><a href=hashfileread.htm>$sessions.</a></b></span></span><span style="font-family:Monospace; font-size:10pt; color:#000000"><span style="font-family:Monospace; font-size:10pt; color:#0000FF"><b>$sid]
<br>
</b></span></span></span><br>

<!--#include virtual="/docs/comment.html" -->


<hr size=1>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr valign="top">
<td><font size="1">Copyright &copy; 1997&#150;2011 Art. Lebedev Studio | <a href="http://www.artlebedev.ru/" target="_blank">http://www.artlebedev.ru</a></font></td>
<td align="right"><font size="1">Дата обновления: 23.02.2011</font></td>
</tr>
</table>
</body>
</html>
