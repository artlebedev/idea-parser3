<html>
<head>
 <title>Junction class</title>
</head>
<body>
<h1><b>Junction class
<br />
</b></h1>
<br />
<normal>This class is designed for storing <b><a href="vars.htm">code</a></b> and <b>scope</b> of its execution.
<br />
While referring to variables containing <mono><b>junction</b></mono><normal>, Parser executes <b>code</b> within the stored <b>scope</b>.
<br />
<br />
Value of type </normal><mono><b>junction</b></mono><normal> appears in variable:
<br />
<br />
&#133;when it is assigned a code:
<br />
<br />
</normal><mono><monoblue><b>$junction{</b></monoblue></mono><mono><b>Code&nbsp;to&nbsp;be&nbsp;assigned&nbsp;to&nbsp;variable:&nbsp;</b><monoblue><b>^do_something[]}
<br />
</b></monoblue></mono><normal>
<br />
&#133;when passing code as parameter:
<br />
<br />
</normal><mono><monoblue><b>@somewhere[]
<br />
^method{</b></monoblue></mono><mono><b>Code&nbsp;passed&nbsp;as&nbsp;parameter</b><b>:&nbsp;</b><monoblue><b>^do_something_else[]}
<br />
&#133;
<br />
@method[parameter]
<br />
</b></monoblue></mono><mono><monoblue><b>#in&nbsp;this&nbsp;case&nbsp;junction&nbsp;will&nbsp;be&nbsp;passed&nbsp;into&nbsp;$parameter
<br />
</b></monoblue></mono><normal>
<br />
&#133;while referring to the name of a class method:
<br />
</normal><mono><monoblue><b>$action[</b></monoblue></mono><mono><monoblue><b>$</b></monoblue></mono><mono><monoblue><b><a href="defineclass.htm">user</a></b></monoblue></mono><mono><monoblue><b>:</b></monoblue></mono><mono><monoblue><b>edit</b></monoblue></mono><mono><monoblue><b>]
<br />
#$action[</b></monoblue></mono><mono><monoblue><b>$</b></monoblue></mono><mono><monoblue><b>user:delete]
<br />
</b></monoblue></mono><mono><monoblue><b>^action[parameter]
<br />
</b></monoblue></mono><normal>
<br />
In this case, </normal><mono><b>$action</b></mono><normal> contains reference to the method and its class. Calling </normal><mono><b>action</b></mono><normal> is then identical to calling </normal><mono><b>^</b><b>edit[parameter]</b></mono><normal>.
<br />
<br />
&#133;when referring to the name of an object method:
<br />
</normal><mono><monoblue><b>
<br />
</b></monoblue></mono><mono><monoblue><b>$action[$person.show_info]
<br />
^action[full]
<br />
</b></monoblue></mono><normal>
<br />
In this case, </normal><mono><b>$action</b></mono><normal> contains reference to the method and its object. Calling action is then identical to calling </normal><mono><b>^person.show_info[parameters]</b></mono><normal>.
<br />
<br />
<br />
</normal><mono><monoblue><b>@check_if_old_enough[age;order_alcohol]
<br />
^myif($age&lt;21&nbsp;&amp;&amp;&nbsp;!$order_alcohol){
<br />
</b></monoblue></mono><mono><b>&nbsp;&nbsp;&nbsp;&nbsp;Sorry,&nbsp;but&nbsp;we&nbsp;cannot&nbsp;sell&nbsp;strong&nbsp;drinks&nbsp;to</b><monoblue><b>&nbsp;${age}</b></monoblue></mono><mono><b>-year-olds.
<br />
</b><monoblue><b>}
<br />
</b></monoblue></mono><h1><b>
<br />
Example of using junction of expressions and code
<br />
</b></h1><mono><monoblue><b>@myif[condition;action][age]
<br />
$age(11)
<br />
^if($condition){
<br />
&nbsp;&nbsp;&nbsp;&nbsp;$action
<br />
}
<br />
</b></monoblue></mono><normal>
<br />
Note<i>: </i><i><a href="params.htm">parameter</a></i><i> </i>with expression is code calculating the expression. It is executed-i.e. expression is calculated-every time the parameter is referred to within the call.
<br />
<br />
In this case, operator </normal><mono><b>myif</b></mono><normal> receives code which-along with everything else-outputs </normal><mono><b>$age</b></mono><normal>. Operator performs check and executes code within the stored </normal><mono><b>scope</b></mono><normal> (</normal><mono><b>$condition</b></mono><normal> and </normal><mono><b>$action</b></mono><normal>). Therefore, what is to be checked and what is to be output will not depend on whether local variable </normal><mono><b>age</b></mono><normal> exists or what its value is.
<br />
</normal><normal><b><i>
<br />
</i></b></normal><h1><b>Example of checking if method exists</b></h1><normal><b><i>
<br />
</i></b></normal><mono><monoblue><b>^if($some_method&nbsp;is&nbsp;junction){
<br />
&nbsp;&nbsp;&nbsp;&nbsp;^some_method[parameter]
<br />
}{
<br />
</b></monoblue></mono><mono><b>&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;method
<br />
</b><monoblue><b>}
<br />
</b></monoblue></mono><normal>
<br />
Method </normal><mono><b>some_method</b></mono><normal>, will be called only if it is defined.
<br />
</normal></normal><br />
</body>
</html>