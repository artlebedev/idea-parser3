<html>
<head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=windows-1251">
    <meta name="keywords" content="install,install, Установка и настройка Parser,conf,unhandled_exception,CHARSETS,encoding *,LIMITS,MAIL,SQL,drivers *,MIME-TYPES">
    <title>Конфигурационный метод</title>

    <script language="JavaScript"><!--
    if(top.frames.length==0) {
        top.location.href='./?parserconfmethod.htm'
    } else {
        if(document.referrer!='' && 0>document.referrer.indexOf(top.frames[0].location.pathname)) {
            top.frames[0].location.hash='parserconfmethod.htm'
        }
    }
    //--></script>

</head>

<body bgcolor="#FFFFFF" text="black">


<table border="0" cellspacing="0" cellpadding="2">
  <tr>
    <td>
      
<span style="font-family:FreeSetC,Arial; font-size:12pt; color:#000000"><b>Конфигурационный метод
<br>
</b></span>
    </td>
  </tr>
  <tr><td bgcolor="#99D228" height="3"></td></tr>
</table>
<br>



<span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">Если в файле определен метод <span style="font-family:Monospace; font-size:10pt; color:#000000"><b>conf,</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">он выполняется первым, до </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b><a href=mainclass.htm>auto</a></b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">, и задает важные системные параметры: 
<br>
<table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td width="14"><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><font face="Symbol" size="2" color="#000000">&#183;</font></span></span></td><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">файлы, описывающие кодировки символов, 
&nbsp;<br>
</span></td></tr></table><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td width="14"><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><font face="Symbol" size="2" color="#000000">&#183;</font></span></td><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">ограничение на размер HTTP POST-запроса,
&nbsp;<br>
</span></td></tr></table><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td width="14"><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><font face="Symbol" size="2" color="#000000">&#183;</font></span></td><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">сервер/программу отправки почты, 
&nbsp;<br>
</span></td></tr></table><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td width="14"><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><font face="Symbol" size="2" color="#000000">&#183;</font></span></td><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">SQL-драйвера и их параметры,
&nbsp;<br>
</span></td></tr></table><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td width="14"><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"><font face="Symbol" size="2" color="#000000">&#183;</font></span></td><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">таблицу соответствия расширения имени файла и его mime-типа.
&nbsp;<br>
</span></td></tr></table><table width="100%" border="0" cellpadding="0" cellspacing="0"><tr valign="top"><td><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"></span></td><td></td></tr></table><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">Рекомендуется поместить этот метод в <a href=parserconfig.htm>Конфигурационный файл</a>.
<br>

<br>
Определение метода:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>@conf[filespec]
<br>
filespec</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> - полное имя файла, содержащего метод.</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">
<br>
Всегда доступна и не нуждается в загрузке файла кодировка </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>UTF-8</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">, являющаяся для Parser<b> </b>кодировкой по умолчанию.
<br>
Чтобы сделать доступными для использования Parser другие кодировки, необходимо указать файлы их описывающие, делается это так:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>$CHARSETS[
<br>
&nbsp;&nbsp;&nbsp;$.windows-1251[/полный/путь/к/windows-1251.cfg]
<br>
&nbsp;&nbsp;&nbsp;…
<br>
]
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">См. <a href=installcharset.htm>Описание формата файла, описывающего кодировку</a>.
<br>

<br>
Максимальный размер POST данных:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>$LIMITS[
<br>
&nbsp;&nbsp;&nbsp;$.post_max_size(10*0x400*0x400)
<br>
]
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">
<br>
Параметр отправки писем (см. </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b><a href=mailsend.htm>^mail:send[…]</a></b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">)…
<br>

<br>
…под Windows и UNIX (под UNIX <b><i>[3.1.2]</i></b>) адрес SMTP-сервера
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>$MAIL[
<br>
&nbsp;&nbsp;&nbsp;$.SMTP[mail.office.design.ru]
<br>
]
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">
<br>
…под UNIX в safe-mode версиях, настроить программу отправки можно только при <a href=compilesrc.htm>сборке Parser из исходных кодов</a>, в бинарных версиях, распространяемых с сайта </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><a href="http://parser.ru/" target="_blank">parser.ru</a></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">, задана команда
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000">&nbsp;&nbsp;&nbsp;/usr/sbin/sendmail&nbsp;-i&nbsp;-t&nbsp;-f&nbsp;postmaster
<br>
</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">Только в unsafe-mode версиях можно задать программу отправки почты самому:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>$MAIL[
<br>
&nbsp;&nbsp;&nbsp;$.sendmail[/custom/mail/sending/program&nbsp;params]
<br>
]
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">и, по умолчанию, используется  эта…
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000">&nbsp;&nbsp;&nbsp;/usr/sbin/sendmail&nbsp;-t&nbsp;-i&nbsp;-f&nbsp;postmaster
<br>
</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">…или эта…</span><span style="font-family:Monospace; font-size:10pt; color:#000000">
<br>
&nbsp;&nbsp;&nbsp;/usr/lib/sendmail&nbsp;-t&nbsp;-i&nbsp;-f&nbsp;postmaster
<br>
</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">…команда, в зависимости от вашей системы.
<br>
При отправке письма вместо «</span><span style="font-family:Monospace; font-size:10pt; color:#000000">postmaster</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">» будет подставлен адрес отправителя из письма из обязательного поля заголовка «</span><span style="font-family:Monospace; font-size:10pt; color:#000000">from</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">».
<br>

<br>
Также можно задать таблицу SQL-драйверов:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>$SQL[
<br>
$.drivers[^</b><b><a href=tablecreate.htm>table::create</a></b><b>{protocol&nbsp;&nbsp;&nbsp;driver&nbsp;&nbsp;&nbsp;client
<br>
mysql&nbsp;&nbsp;&nbsp;/full/disk/path/parser3mysql.dll&nbsp;&nbsp;&nbsp;/full/disk/path/libmySQL.dll
<br>
odbc&nbsp;&nbsp;&nbsp;/full/disk/path/parser3odbc.dll
<br>
pgsql&nbsp;&nbsp;&nbsp;/full/disk/path/parser3pgsql.dll&nbsp;&nbsp;&nbsp;/full/disk/path/libpq.dll
<br>
sqlite&nbsp;&nbsp;&nbsp;/full/disk/path/parser3sqlite.dll&nbsp;&nbsp;&nbsp;/full/disk/path/sqlite3.dll
<br>
oracle&nbsp;&nbsp;&nbsp;/path/to/parser3oracle.dll&nbsp;&nbsp;&nbsp;C:\Oracle\Ora81\BIN\oci.dll?PATH+=^;C:\Oracle\Ora81\bin
<br>
}]
<br>
]
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">В колонке </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>client</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> таблицы </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>drivers</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> допустимы параметры клиентской библиотеке, отделяемые знаком </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>?</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> от имени файла библиотеки, в таком виде:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>имя1=значение1&amp;имя2=значение2&amp;…
<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">а также </span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>имя+=значение</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">.
<br>
Эти переменные будут занесены(</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>=</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">) или добавлены к имеющемуся значению(</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>+=</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">) в программное окружение (environment) перед инициализацией библиотеки. В частности, удобно добавить путь к </span><span style="font-family:Monospace; font-size:10pt; color:#000000">O</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">racle библиотекам здесь, если этого не было сделано в системном программном окружении (system environment).
<br>

<br>
Таблица типов файлов:
<br>
</span><span style="font-family:Monospace; font-size:10pt; color:#000000"><b>#файл,&nbsp;создаваемый&nbsp;</b><b><a href=fileload.htm>^file::load[…]</a></b><b>,
<br>
#при&nbsp;выдаче&nbsp;в&nbsp;</b><b><a href=responsebody.htm>$response:body</a></b><b>&nbsp;задаст&nbsp;этот&nbsp;</b><b><a href=responsefields.htm>$response:content-type</a></b><b>
<br>
$MIME-TYPES[^</b><b><a href=tablecreate.htm>table::create</a></b><b>{ext&nbsp;mime-type
<br>
zip&nbsp;application/zip
<br>
doc&nbsp;application/msword
<br>
xls&nbsp;application/vnd.ms-excel
<br>
pdf&nbsp;application/pdf
<br>
ppt&nbsp;application/powerpoint
<br>
rtf&nbsp;application/rtf
<br>
gif&nbsp;image/gif
<br>
jpg&nbsp;image/jpeg
<br>
jpeg&nbsp;image/jpeg
<br>
png&nbsp;image/png
<br>
tif&nbsp;image/tiff
<br>
html&nbsp;text/html
<br>
htm&nbsp;text/html
<br>
txt&nbsp;text/plain
<br>
mts&nbsp;application/metastream
<br>
mid&nbsp;audio/midi
<br>
midi&nbsp;audio/midi
<br>
mp3&nbsp;audio/mpeg
<br>
ram&nbsp;audio/x-pn-realaudio
<br>
rpm&nbsp;audio/x-pn-realaudio-plugin
<br>
ra&nbsp;audio/x-realaudio
<br>
wav&nbsp;audio/x-wav
<br>
au&nbsp;audio/basic
<br>
mpg&nbsp;video/mpeg
<br>
avi&nbsp;video/x-msvideo
<br>
mov&nbsp;video/quicktime
<br>
swf&nbsp;application/x-shockwave-flash
<br>
}]
<br>

<br>
</b></span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">Расширения имен файлов в таблице должны быть написаны в нижнем регистре. Поиск по таблице нечувствителен к регистру, т.е. файл </span><span style="font-family:Monospace; font-size:10pt; color:#000000">FACE.GIF</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000"> получит mime-тип </span><span style="font-family:Monospace; font-size:10pt; color:#000000">image/gif</span><span style="font-family:FreeSetC,Arial; font-size:10pt; color:#000000">.
<br>
</span></span><br>

<!--#include virtual="/docs/comment.html" -->


<hr size=1>
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr valign="top">
<td><font size="1">Copyright &copy; 1997&#150;2011 Art. Lebedev Studio | <a href="http://www.artlebedev.ru/" target="_blank">http://www.artlebedev.ru</a></font></td>
<td align="right"><font size="1">Дата обновления: 22.02.2007</font></td>
</tr>
</table>
</body>
</html>
